/*! APP.CSS - Application Theme & Components for Tachyons5 */
/*
    This file contains application-specific theme configuration and component styles
    that build on top of tachyons5.css variables and utilities.

    Customize your app's color scheme by modifying the semantic palette variables below.

    Sections:
    1. Semantic Theme Palette (customize these!)
    2. Theme Switching (auto/manual dark mode)
    3. Semantic Utility Classes
    4. Components (Dropdown, Dialog, Buttons, Forms, etc.)
*/

@layer tokens {

    /* ==========================================================================
   SEMANTIC THEME PALETTE
   ==========================================================================

   Customize your app's colors here! These map the raw color palette from
   tachyons5.css to semantic meanings for your application.

*/

    :root {
        /* Default component radius */
        --default-radius: var(--border-radius-11);

        /* Light theme colors */
        --brand-light: var(--indigo-5);
        --text-light: var(--slate-gray-0);
        --muted-light: var(--slate-gray-2);
        --surface-base-light: var(--slate-gray-10);

        --surface-0-light: var(--surface-base-light);
        --surface-1-light: hsl(from var(--surface-base-light) h s calc(l + 4));
        --surface-2-light: hsl(from var(--surface-base-light) h s calc(l + 8));
        --surface-3-light: hsl(from var(--surface-base-light) h s calc(l + 12));
        --error-light: var(--red-5);
        --success-light: var(--green-5);
        --notice-light: var(--blue-5);
        --border-color-light: hsl(from var(--surface-base-light) h s calc(l - 4));

        /* Dark theme colors */
        --brand-dark: var(--indigo-6);
        --text-dark: var(--slate-gray-11);
        --muted-dark: var(--slate-gray-6);
        --surface-base-dark: var(--slate-gray-0);

        --surface-0-dark: var(--surface-base-dark);
        --surface-1-dark: hsl(from var(--surface-base-dark) h s calc(l + 4));
        --surface-2-dark: hsl(from var(--surface-base-dark) h s calc(l + 8));
        --surface-3-dark: hsl(from var(--surface-base-dark) h s calc(l + 12));
        --error-dark: var(--red-6);
        --success-dark: var(--green-6);
        --notice-dark: var(--blue-6);
        --border-color-dark: hsl(from var(--surface-base-dark) h s calc(l + 16));

        /* Dim theme colors */
        --brand-dim: var(--indigo-5);
        --text-dim: var(--slate-gray-10);
        --muted-dim: var(--slate-gray-8);
        --surface-base-dim: var(--slate-gray-2);

        --surface-0-dim: var(--surface-base-dim);
        --surface-1-dim: hsl(from var(--surface-base-dim) h s calc(l + 4));
        --surface-2-dim: hsl(from var(--surface-base-dim) h s calc(l + 8));
        --surface-3-dim: hsl(from var(--surface-base-dim) h s calc(l + 12));
        --error-dim: var(--red-5);
        --success-dim: var(--green-5);
        --notice-dim: var(--blue-5);
        --border-color-dim: hsl(from var(--surface-base-dim) h s calc(l + 12));

        /* Default to light theme */
        color-scheme: light;
        --brand: var(--brand-light);
        --text: var(--text-light);
        --muted: var(--muted-light);
        --surface-0: var(--surface-0-light);
        --surface-1: var(--surface-1-light);
        --surface-2: var(--surface-2-light);
        --surface-3: var(--surface-3-light);
        --error: var(--error-light);
        --success: var(--success-light);
        --notice: var(--notice-light);
        --border-color: var(--border-color-light);
    }

    /* ==========================================================================
   THEME SWITCHING
   ========================================================================== */

    /* Automatic dark mode */
    @media (prefers-color-scheme: dark) {
        :root {
            color-scheme: dark;
            --shadow-color: 220 40% 2%;
            --shadow-strength: 25%;
            --inner-shadow-highlight: inset 0 -.5px 0 0 #fff1, inset 0 .5px 0 0 #0007;
            --brand: var(--brand-dark);
            --text: var(--text-dark);
            --muted: var(--muted-dark);
            --surface-0: var(--surface-0-dark);
            --surface-1: var(--surface-1-dark);
            --surface-2: var(--surface-2-dark);
            --surface-3: var(--surface-3-dark);
            --error: var(--error-dark);
            --success: var(--success-dark);
            --notice: var(--notice-dark);
            --border-color: var(--border-color-dark);
        }
    }

    /* Manual light mode override */
    [data-theme="light"] {
        color-scheme: light;
        --shadow-color: 220 3% 15%;
        --shadow-strength: 1%;
        --inner-shadow-highlight: inset 0 -.5px 0 0 #fff, inset 0 .5px 0 0 #0001;
        --brand: var(--brand-light);
        --text: var(--text-light);
        --muted: var(--muted-light);
        --surface-0: var(--surface-0-light);
        --surface-1: var(--surface-1-light);
        --surface-2: var(--surface-2-light);
        --surface-3: var(--surface-3-light);
        --error: var(--error-light);
        --success: var(--success-light);
        --notice: var(--notice-light);
        --border-color: var(--border-color-light);
    }

    /* Manual dark mode override */
    [data-theme="dark"] {
        color-scheme: dark;
        --shadow-color: 220 40% 2%;
        --shadow-strength: 25%;
        --inner-shadow-highlight: inset 0 -.5px 0 0 #fff1, inset 0 .5px 0 0 #0007;
        --brand: var(--brand-dark);
        --text: var(--text-dark);
        --muted: var(--muted-dark);
        --surface-0: var(--surface-0-dark);
        --surface-1: var(--surface-1-dark);
        --surface-2: var(--surface-2-dark);
        --surface-3: var(--surface-3-dark);
        --error: var(--error-dark);
        --success: var(--success-dark);
        --notice: var(--notice-dark);
        --border-color: var(--border-color-dark);
    }

    [data-theme="dim"] {
        color-scheme: dark;
        --shadow-color: 220 40% 2%;
        --shadow-strength: 25%;
        --inner-shadow-highlight: inset 0 -.5px 0 0 #fff1, inset 0 .5px 0 0 #0007;
        --brand: var(--brand-dim);
        --text: var(--text-dim);
        --muted: var(--muted-dim);
        --surface-0: var(--surface-0-dim);
        --surface-1: var(--surface-1-dim);
        --surface-2: var(--surface-2-dim);
        --surface-3: var(--surface-3-dim);
        --error: var(--error-dim);
        --success: var(--success-dim);
        --notice: var(--notice-dim);
        --border-color: var(--border-color-dim);
    }

}

/* end @layer tokens */

@layer utilities {

    /* ==========================================================================
   SEMANTIC UTILITY CLASSES
   ========================================================================== */

    /* Semantic text colors */
    .brand {
        color: var(--brand)
    }

    .text {
        color: var(--text)
    }

    .muted {
        color: var(--muted)
    }

    .error {
        color: var(--error)
    }

    .success {
        color: var(--success)
    }

    .notice {
        color: var(--notice)
    }

    .surface-0 {
        color: var(--surface-0)
    }

    .surface-1 {
        color: var(--surface-1)
    }

    .surface-2 {
        color: var(--surface-2)
    }

    .surface-3 {
        color: var(--surface-3)
    }

    /* Semantic background colors */
    .bg-brand {
        background-color: var(--brand)
    }

    .bg-surface-0 {
        background-color: var(--surface-0)
    }

    .bg-surface-1 {
        background-color: var(--surface-1)
    }

    .bg-surface-2 {
        background-color: var(--surface-2)
    }

    .bg-surface-3 {
        background-color: var(--surface-3)
    }

    .bg-error {
        background-color: var(--error)
    }

    .bg-success {
        background-color: var(--success)
    }

    .bg-notice {
        background-color: var(--notice)
    }

    /* Semantic border colors */
    .b--brand {
        border-color: var(--brand)
    }

    .b--text {
        border-color: var(--text)
    }

    .b--muted {
        border-color: var(--muted)
    }

    .b--surface-0 {
        border-color: var(--surface-0)
    }

    .b--surface-1 {
        border-color: var(--surface-1)
    }

    .b--surface-2 {
        border-color: var(--surface-2)
    }

    .b--surface-3 {
        border-color: var(--surface-3)
    }

    .b--error {
        border-color: var(--error)
    }

    .b--success {
        border-color: var(--success)
    }

    .b--notice {
        border-color: var(--notice)
    }

    .b--default {
        border-color: var(--border-color)
    }

    /* Semantic hover states - text */
    .hover-brand:hover {
        color: var(--brand)
    }

    .hover-text:hover {
        color: var(--text)
    }

    .hover-muted:hover {
        color: var(--muted)
    }

    .hover-error:hover {
        color: var(--error)
    }

    .hover-success:hover {
        color: var(--success)
    }

    .hover-notice:hover {
        color: var(--notice)
    }

    /* Semantic hover states - background */
    .hover-bg-brand:hover {
        background-color: var(--brand)
    }

    .hover-bg-surface-0:hover {
        background-color: var(--surface-0)
    }

    .hover-bg-surface-1:hover {
        background-color: var(--surface-1)
    }

    .hover-bg-surface-2:hover {
        background-color: var(--surface-2)
    }

    .hover-bg-surface-3:hover {
        background-color: var(--surface-3)
    }

    .hover-bg-error:hover {
        background-color: var(--error)
    }

    .hover-bg-success:hover {
        background-color: var(--success)
    }

    .hover-bg-notice:hover {
        background-color: var(--notice)
    }

    /* Semantic hover states - border */
    .hover-b--brand:hover {
        border-color: var(--brand)
    }

    .hover-b--text:hover {
        border-color: var(--text)
    }

    .hover-b--muted:hover {
        border-color: var(--muted)
    }

    .hover-b--error:hover {
        border-color: var(--error)
    }

    .hover-b--success:hover {
        border-color: var(--success)
    }

    .hover-b--notice:hover {
        border-color: var(--notice)
    }

    .hover-b--default:hover {
        border-color: var(--border-color)
    }

    /* Semantic focus states - text */
    .focus-brand:focus {
        color: var(--brand)
    }

    .focus-text:focus {
        color: var(--text)
    }

    .focus-muted:focus {
        color: var(--muted)
    }

    .focus-error:focus {
        color: var(--error)
    }

    .focus-success:focus {
        color: var(--success)
    }

    .focus-notice:focus {
        color: var(--notice)
    }

    /* Semantic focus states - background */
    .focus-bg-brand:focus {
        background-color: var(--brand)
    }

    .focus-bg-surface-0:focus {
        background-color: var(--surface-0)
    }

    .focus-bg-surface-1:focus {
        background-color: var(--surface-1)
    }

    .focus-bg-surface-2:focus {
        background-color: var(--surface-2)
    }

    .focus-bg-surface-3:focus {
        background-color: var(--surface-3)
    }

    .focus-bg-error:focus {
        background-color: var(--error)
    }

    .focus-bg-success:focus {
        background-color: var(--success)
    }

    .focus-bg-notice:focus {
        background-color: var(--notice)
    }

    /* Semantic focus states - border */
    .focus-b--brand:focus {
        border-color: var(--brand)
    }

    .focus-b--text:focus {
        border-color: var(--text)
    }

    .focus-b--muted:focus {
        border-color: var(--muted)
    }

    .focus-b--error:focus {
        border-color: var(--error)
    }

    .focus-b--success:focus {
        border-color: var(--success)
    }

    .focus-b--notice:focus {
        border-color: var(--notice)
    }

    .focus-b--default:focus {
        border-color: var(--border-color)
    }

}

/* end @layer utilities */

@layer components {

    /* ==========================================================================
   COMPONENTS
   ========================================================================== */

    /* ==========================================================================
   LINKS
   ==========================================================================

   Styled hyperlinks with hover effects and variants.

   Usage:
   <a href="#" class="link">Default link</a>
   <a href="#" class="link link--muted">Muted link</a>
   <a href="#" class="link link--underline">Always underlined</a>

*/

    /* Base link styles - bare <a> tags and explicit .link class from tachyons5 */
    a:not([class]) {
        text-decoration: none;
        color: var(--text);
        font-weight: 500;
    }

    a:not([class]),
    a:not([class]):active,
    a:not([class]):focus,
    a:not([class]):hover,
    a:not([class]):link,
    a:not([class]):visited {
        transition: all .15s ease-in
    }

    a:not([class]):focus {
        outline: 1px dotted currentColor
    }

    /* Brand link - uses brand color */
    .link--brand {
        color: var(--brand);

        &:hover {
            color: hsl(from var(--brand) h s calc(l - 10));
        }

        &:active {
            color: hsl(from var(--brand) h s calc(l - 20));
        }
    }

    /* Muted link - subtle, uses muted color */
    .link--muted {
        color: var(--muted);
        font-weight: 500;

        &:hover {
            color: var(--text);
        }

        &:active {
            color: hsl(from var(--text) h s calc(l - 10));
        }
    }

    /* Text link - inherits color, just adds underline on hover */
    .link--text {
        color: inherit;

        &:hover {
            color: var(--brand);
        }

        &:active {
            color: hsl(from var(--brand) h s calc(l - 20));
        }
    }

    /* Always underlined */
    .link--underline {
        text-decoration: underline !important;
        text-decoration-color: hsl(from var(--brand) h s l / 0.4);

        &:hover {
            text-decoration-color: currentColor;
        }
    }

    /* External link indicator */
    .link--external::after {
        content: " ‚Üó";
        font-size: 0.85em;
    }

    /* ==========================================================================
   TOOLTIP
   ==========================================================================

   CSS-only tooltips using data attributes.

   Usage:
   <button data-tooltip="Save your work">üíæ Save</button>
   <button data-tooltip="Delete" data-tooltip-position="top">üóëÔ∏è</button>
   <span data-tooltip="More info" data-tooltip-position="right">‚ÑπÔ∏è</span>

   Positions: top (default), bottom, left, right

*/

    [data-tooltip] {
        position: relative;

        &::after {
            --_tooltip-bg: var(--surface-0-dark);
            --_tooltip-color: var(--text-dark);
            content: attr(data-tooltip);
            position: absolute;
            z-index: 1000;
            padding: var(--spacing-2) var(--spacing-3);
            background-color: var(--_tooltip-bg);
            color: var(--_tooltip-color);
            font-size: var(--font-size-2);
            font-weight: 500;
            line-height: var(--line-height-body);
            white-space: nowrap;
            border-radius: var(--border-radius-2);
            box-shadow: var(--box-shadow-3);
            pointer-events: none;
            opacity: 0;
            transition: opacity var(--duration-0) var(--easing-function-1),
                transform var(--duration-0) var(--easing-function-1);
            transition-delay: 0s;
            /* Default position: bottom */
            top: calc(100% + var(--spacing-2));
            left: 50%;
            transform: translateX(-50%) translateY(calc(-1 * var(--spacing-1)));
        }

        /* Show on hover and focus */
        &:hover::after,
        &:focus::after {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            transition-delay: 0.3s;
        }
    }

    /* Position: top */
    [data-tooltip-position="top"] {
        &::after {
            top: auto;
            bottom: calc(100% + var(--spacing-2));
            transform: translateX(-50%) translateY(var(--spacing-1));
        }

        &:hover::after,
        &:focus::after {
            transform: translateX(-50%) translateY(0);
        }
    }

    /* Position: left */
    [data-tooltip-position="left"] {
        &::after {
            bottom: auto;
            top: 50%;
            left: auto;
            right: calc(100% + var(--spacing-2));
            transform: translateY(-50%) translateX(var(--spacing-1));
        }

        &:hover::after,
        &:focus::after {
            transform: translateY(-50%) translateX(0);
        }
    }

    /* Position: right */
    [data-tooltip-position="right"] {
        &::after {
            bottom: auto;
            top: 50%;
            left: calc(100% + var(--spacing-2));
            transform: translateY(-50%) translateX(calc(-1 * var(--spacing-1)));
        }

        &:hover::after,
        &:focus::after {
            transform: translateY(-50%) translateX(0);
        }
    }

    /* Hide tooltip when element is disabled or has empty tooltip */
    [data-tooltip=""]:hover::after,
    [data-tooltip]:disabled::after,
    [data-tooltip][aria-disabled="true"]::after {
        opacity: 0;
    }

    /* ==========================================================================
   DROPDOWN MENU
   ==========================================================================

   A dropdown menu component using the Popover API with CSS anchor positioning.
   Uses smooth opacity and transform transitions with @starting-style for entry animations.

*/

    /* Dropdown container - provides positioning context for fallback */
    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-menu {
        opacity: 1;
        transform: translateY(0);
        transition: opacity var(--duration-0) var(--easing-function-1),
            transform var(--duration-0) var(--easing-function-1);
        /* Reset popover default positioning */
        margin: 0;
        padding: 0;
        border: none;
        inset: unset;
        /* Fallback: position relative to button using JS-set custom properties */
        position: fixed;
        top: var(--dropdown-top, 0);
        left: var(--dropdown-left, 0);
        margin-top: var(--spacing-2);
    }

    /* Hide when not open - works for all browsers with popover support */
    .dropdown-menu:not(:popover-open) {
        opacity: 0;
        transform: translateY(calc(-1 * var(--spacing-2)));
        pointer-events: none;
    }

    /* Alternative positions - fallback values */
    .dropdown-menu--end {
        left: auto;
        right: var(--dropdown-right, 0);
    }

    .dropdown-menu--top {
        top: auto;
        bottom: var(--dropdown-bottom, 0);
        margin-top: 0;
        margin-bottom: var(--spacing-2);
    }

    .dropdown-menu--top:not(:popover-open) {
        transform: translateY(var(--spacing-2));
    }

    /* Modern browsers with anchor positioning support */
    @supports (anchor-name: --test) {
        .dropdown-menu {
            top: anchor(bottom);
            left: anchor(left);
            position-anchor: var(--anchor);
            position-try-fallbacks: flip-block, flip-inline;
            transition: opacity var(--duration-0) var(--easing-function-1),
                transform var(--duration-0) var(--easing-function-1),
                display var(--duration-0) allow-discrete;
        }

        .dropdown-menu--end {
            left: auto;
            right: anchor(right);
        }

        .dropdown-menu--top {
            top: auto;
            bottom: anchor(top);
        }

        @starting-style {
            .dropdown-menu:popover-open {
                opacity: 0;
                transform: translateY(calc(-1 * var(--spacing-2)));
            }

            .dropdown-menu--top:popover-open {
                transform: translateY(var(--spacing-2));
            }
        }
    }

    /* ==========================================================================
   DIALOG / MODAL
   ==========================================================================

   A dialog component using the native <dialog> element with backdrop styling
   and smooth entry/exit animations using @starting-style.

   Usage:
   <dialog class="dialog">...</dialog>
   <dialog class="dialog dialog--full">...</dialog>

*/

    .dialog {
        --_dialog-bg: var(--dialog-bg, var(--surface-1));
        --_dialog-color: var(--dialog-color, var(--text));
        --_dialog-radius: var(--dialog-radius, var(--border-radius-3));
        --_dialog-padding: var(--dialog-padding, var(--spacing-5));
        --_dialog-shadow: var(--dialog-shadow, var(--box-shadow-4));
        --_dialog-backdrop: var(--dialog-backdrop, hsl(0 0% 0% / 0.5));
        border: none;
        border-radius: var(--_dialog-radius);
        padding: var(--_dialog-padding);
        background-color: var(--_dialog-bg);
        color: var(--_dialog-color);
        max-width: min(90vw, 32rem);
        max-height: 85vh;
        max-height: 85dvh;
        overflow: auto;
        box-shadow: var(--_dialog-shadow);
        opacity: 1;
        transform: translateY(0) scale(1);
        transition: opacity var(--duration-0) var(--easing-function-3),
            transform var(--duration-0) var(--easing-function-3),
            overlay var(--duration-2) allow-discrete,
            display var(--duration-2) allow-discrete;
    }

    .dialog::backdrop {
        background-color: var(--_dialog-backdrop);
        opacity: 1;
        transition: opacity var(--duration-0) var(--easing-function-3),
            overlay var(--duration-2) allow-discrete,
            display var(--duration-2) allow-discrete;
    }

    @starting-style {
        .dialog[open] {
            opacity: 0;
            transform: translateY(var(--spacing-4)) scale(0.95);
        }

        .dialog[open]::backdrop {
            opacity: 0;
        }
    }

    .dialog:not([open]) {
        opacity: 0;
        transform: translateY(var(--spacing-4)) scale(0.95);
    }

    .dialog:not([open])::backdrop {
        opacity: 0;
    }

    /* Full-screen dialog variant */
    .dialog--full {
        max-width: 100vw;
        max-height: 100vh;
        max-height: 100dvh;
        width: 100%;
        height: 100%;
        border-radius: 0;
    }

    /* Small dialog variant */
    .dialog--sm {
        max-width: min(90vw, 20rem);
        padding: var(--spacing-4);
    }

    /* Large dialog variant */
    .dialog--lg {
        max-width: min(90vw, 48rem);
    }

    /* ==========================================================================
   DRAWER
   ==========================================================================

   A slide-in panel component using the native <dialog> element.
   Slides in from left, right, top, or bottom edges.

   Usage:
   <dialog class="drawer drawer--left">...</dialog>   <!-- Sidebar nav -->
   <dialog class="drawer drawer--right">...</dialog>  <!-- Settings panel -->
   <dialog class="drawer drawer--top">...</dialog>    <!-- Notifications -->
   <dialog class="drawer drawer--bottom">...</dialog> <!-- Command palette -->

*/

    .drawer {
        --_drawer-bg: var(--drawer-bg, var(--surface-1));
        --_drawer-color: var(--drawer-color, var(--text));
        --_drawer-radius: var(--drawer-radius, var(--border-radius-3));
        --_drawer-padding: var(--drawer-padding, var(--spacing-4));
        --_drawer-shadow: var(--drawer-shadow, var(--box-shadow-4));
        --_drawer-backdrop: var(--drawer-backdrop, hsl(0 0% 0% / 0.5));
        border: none;
        padding: var(--_drawer-padding);
        background-color: var(--_drawer-bg);
        color: var(--_drawer-color);
        box-shadow: var(--_drawer-shadow);
        margin: 0;
        opacity: 1;
        transition: opacity var(--duration-0) var(--easing-function-3),
            transform var(--duration-0) var(--easing-function-3),
            overlay var(--duration-0) allow-discrete,
            display var(--duration-0) allow-discrete;
    }

    .drawer::backdrop {
        background-color: var(--_drawer-backdrop);
        opacity: 1;
        transition: opacity var(--duration-0) var(--easing-function-3),
            overlay var(--duration-0) allow-discrete,
            display var(--duration-0) allow-discrete;
    }

    .drawer:not([open])::backdrop {
        opacity: 0;
    }

    /* Left drawer (sidebar navigation) */
    .drawer--left {
        position: fixed;
        inset: 0 auto 0 0;
        width: min(80vw, 20rem);
        max-height: 100vh;
        max-height: 100dvh;
        height: 100%;
        border-radius: 0 var(--_drawer-radius) var(--_drawer-radius) 0;
        transform: translateX(0);
    }

    @starting-style {
        .drawer--left[open] {
            opacity: 0;
            transform: translateX(-100%);
        }
    }

    .drawer--left:not([open]) {
        opacity: 0;
        transform: translateX(-100%);
    }

    /* Right drawer (settings, details panel) */
    .drawer--right {
        position: fixed;
        inset: 0 0 0 auto;
        width: min(80vw, 20rem);
        max-height: 100vh;
        max-height: 100dvh;
        height: 100%;
        border-radius: var(--_drawer-radius) 0 0 var(--_drawer-radius);
        transform: translateX(0);
    }

    @starting-style {
        .drawer--right[open] {
            opacity: 0;
            transform: translateX(100%);
        }
    }

    .drawer--right:not([open]) {
        opacity: 0;
        transform: translateX(100%);
    }

    /* Top drawer (notifications, alerts) */
    .drawer--top {
        position: fixed;
        inset: 0 0 auto 0;
        width: 100%;
        max-width: 100vw;
        max-height: 50vh;
        max-height: 50dvh;
        border-radius: 0 0 var(--_drawer-radius) var(--_drawer-radius);
        transform: translateY(0);
    }

    @starting-style {
        .drawer--top[open] {
            opacity: 0;
            transform: translateY(-100%);
        }
    }

    .drawer--top:not([open]) {
        opacity: 0;
        transform: translateY(-100%);
    }

    /* Bottom drawer (command palette, action sheets) */
    .drawer--bottom {
        position: fixed;
        inset: auto 0 0 0;
        width: 100%;
        max-width: 100vw;
        max-height: 85vh;
        max-height: 85dvh;
        border-radius: var(--_drawer-radius) var(--_drawer-radius) 0 0;
        transform: translateY(0);
    }

    @starting-style {
        .drawer--bottom[open] {
            opacity: 0;
            transform: translateY(100%);
        }
    }

    .drawer--bottom:not([open]) {
        opacity: 0;
        transform: translateY(100%);
    }

    /* Drawer size variants */
    .drawer--sm.drawer--left,
    .drawer--sm.drawer--right {
        width: min(70vw, 16rem);
    }

    .drawer--lg.drawer--left,
    .drawer--lg.drawer--right {
        width: min(90vw, 28rem);
    }

    .drawer--sm.drawer--top,
    .drawer--sm.drawer--bottom {
        max-height: 30vh;
        max-height: 30dvh;
    }

    .drawer--lg.drawer--top,
    .drawer--lg.drawer--bottom {
        max-height: 70vh;
        max-height: 70dvh;
    }

    /* ==========================================================================
   FORM ELEMENTS
   ==========================================================================

   Base styles for form inputs that respect the theme.
   Uses accent-color and semantic colors for consistency.

*/

    .input {
        --_input-bg: var(--input-bg, var(--surface-2));
        --_input-color: var(--input-color, var(--text));
        --_input-border: var(--input-border, var(--border-color));
        --_input-radius: var(--input-radius, min(var(--default-radius), var(--border-radius-3)));
        --_input-padding: var(--input-padding, var(--spacing-3));
        --_input-focus-color: var(--input-focus-color, var(--brand));
        appearance: none;
        background-color: var(--_input-bg);
        border: 2px solid var(--_input-border);
        border-radius: var(--_input-radius);
        color: var(--_input-color);
        padding: var(--_input-padding);
        transition: border-color var(--duration-0) var(--easing-function-1),
            box-shadow var(--duration-0) var(--easing-function-1);

        &:focus {
            outline: none;
            border-color: var(--_input-focus-color);
            /* box-shadow: 0 0 0 3px hsl(from var(--_input-focus-color) h s l / 0.2); */
        }

        &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    }

    /* Input group - input + button glued together */
    .input-group {
        display: flex;
        --_input-group-radius: var(--input-group-radius, var(--default-radius));
    }

    .input-group>.input {
        flex: 1;
        min-width: 0;
        border-start-start-radius: var(--_input-group-radius);
        border-end-start-radius: var(--_input-group-radius);
        border-start-end-radius: 0;
        border-end-end-radius: 0;
        border-inline-end: none;
    }

    .input-group>.btn {
        border-start-start-radius: 0;
        border-end-start-radius: 0;
        border-start-end-radius: var(--_input-group-radius);
        border-end-end-radius: var(--_input-group-radius);
    }

    .input-group>.input:focus {
        z-index: 1;
        /* Keep focus ring visible */
    }

    /* Input group radius modifiers */
    .input-group--rounded {
        --input-group-radius: var(--border-radius-4);
    }

    .input-group--pill {
        --input-group-radius: var(--border-radius-11);
    }

    /* Input size variants */
    .input--sm {
        font-size: var(--font-size-2);
    }

    .input--lg {
        font-size: var(--font-size-4);
    }

    .input--rounded {
        border-radius: var(--border-radius-4);
    }

    .input--pill {
        border-radius: var(--border-radius-11);
    }

    .input::placeholder {
        color: var(--muted);
    }

    /* Input variants */
    .input--error {
        border-color: var(--error);

        &:focus {
            border-color: var(--error);
            box-shadow: 0 0 0 3px hsl(from var(--error) h s l / 0.2);
        }
    }

    .input--success {
        border-color: var(--success);

        &:focus {
            border-color: var(--success);
            box-shadow: 0 0 0 3px hsl(from var(--success) h s l / 0.2);
        }
    }

    /* ==========================================================================
   CHECKBOX & RADIO
   ==========================================================================

   Custom styled checkboxes and radio buttons.
   Supports accent-* utility classes via the --_accent custom property.

*/

    .checkbox,
    .radio {
        --_accent: var(--accent, var(--brand));
        --_checkbox-bg: var(--checkbox-bg, var(--surface-0));
        --_checkbox-border: var(--checkbox-border, var(--muted));
        --_checkbox-size: var(--checkbox-size, 1.25em);
        appearance: none;
        width: var(--_checkbox-size);
        height: var(--_checkbox-size);
        border: 2px solid var(--_checkbox-border);
        background-color: var(--_checkbox-bg);
        cursor: pointer;
        vertical-align: middle;
        transition: border-color var(--duration-0) var(--easing-function-1),
            background-color var(--duration-0) var(--easing-function-1);

        &:hover {
            border-color: var(--_accent);
        }

        &:checked {
            background-color: var(--_accent);
            border-color: var(--_accent);
        }

        &:focus-visible {
            outline: 2px solid var(--_accent);
            outline-offset: 2px;
        }

        &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    }

    .checkbox {
        border-radius: var(--border-radius-1);
    }

    .radio {
        border-radius: 50%;
    }

    .checkbox:checked {
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
        background-size: 100% 100%;
        background-position: center;
        background-repeat: no-repeat;
    }

    .radio:checked {
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='8' cy='8' r='3'/%3E%3C/svg%3E");
        background-size: 100% 100%;
        background-position: center;
        background-repeat: no-repeat;
    }

    /* ==========================================================================
   SWITCH / TOGGLE
   ==========================================================================

   Toggle switch component for boolean inputs.

*/

    .switch {
        --_switch-bg: var(--switch-bg, var(--muted));
        --_switch-bg-checked: var(--switch-bg-checked, var(--brand));
        --_switch-knob: var(--switch-knob, var(--surface-0));
        --_switch-radius: var(--switch-radius, var(--default-radius));
        appearance: none;
        width: 2.5em;
        height: 1.5em;
        border-radius: var(--_switch-radius);
        background-color: var(--_switch-bg);
        cursor: pointer;
        position: relative;
        transition: background-color var(--duration-0) var(--easing-function-1);

        &::before {
            content: '';
            position: absolute;
            width: 1.1em;
            height: 1.1em;
            border-radius: var(--_switch-radius);
            background-color: var(--_switch-knob);
            top: 0.2em;
            left: 0.2em;
            transition: transform var(--duration-0) var(--easing-function-1);
        }

        &:checked {
            background-color: var(--_switch-bg-checked);

            &::before {
                transform: translateX(1em);
            }
        }

        &:focus-visible {
            outline: 2px solid var(--_switch-bg-checked);
            outline-offset: 2px;
        }

        &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    }

    /* ==========================================================================
   BUTTONS
   ==========================================================================

   Composable button styles following BEM conventions.
   Base .btn class with modifier variants.

*/

    .btn {
        --_btn-bg: var(--btn-bg, transparent);
        --_btn-color: var(--btn-color, var(--text));
        --_btn-border: var(--btn-border, transparent);
        --_btn-radius: var(--btn-radius, var(--default-radius));
        --_btn-padding-x: var(--btn-padding-x, var(--spacing-4));
        --_btn-padding-y: var(--btn-padding-y, var(--spacing-3));
        --_btn-gap: var(--btn-gap, var(--spacing-2));
        --_btn-font-weight: var(--btn-font-weight, 600);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        white-space: nowrap;
        gap: var(--_btn-gap);
        padding: var(--_btn-padding-y) var(--_btn-padding-x);
        font-family: inherit;
        font-size: inherit;
        font-weight: var(--_btn-font-weight);
        line-height: 1;
        text-decoration: none;
        border: 1px solid var(--_btn-border);
        border-radius: var(--_btn-radius);
        cursor: pointer;
        transition: background-color var(--duration-0) var(--easing-function-1),
            border-color var(--duration-0) var(--easing-function-1),
            color var(--duration-0) var(--easing-function-1),
            box-shadow var(--duration-0) var(--easing-function-1),
            transform var(--duration-0) var(--easing-function-1),
            filter var(--duration-0) var(--easing-function-1);

        &:focus-visible {
            outline: 2px solid var(--brand);
            outline-offset: 2px;
        }

        &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        &:active:not(:disabled) {
            filter: brightness(0.9);
        }
    }

    /* Button variants */
    .btn--brand {
        background-color: var(--brand);
        color: white;

        &:hover:not(:disabled) {
            background-color: hsl(from var(--brand) h s calc(l - 5));
        }
    }

    .btn--surface {
        background-color: var(--surface-3);
        border-color: var(--border-color);
        color: var(--text);

        &:hover:not(:disabled) {
            background-color: var(--surface-1);
        }
    }

    .btn--outline {
        background-color: transparent;
        border-color: var(--border-color);
        color: var(--text);

        &:hover:not(:disabled) {
            border-color: var(--surface-2);
            background-color: var(--surface-1);
        }
    }

    .btn--ghost {
        background-color: transparent;
        color: var(--text);

        &:hover:not(:disabled) {
            background-color: var(--surface-1);
        }
    }

    /* Button color variants */
    .btn--error {
        background-color: var(--error);
        color: white;

        &:hover:not(:disabled) {
            background-color: hsl(from var(--error) h s calc(l - 5));
        }
    }

    .btn--success {
        background-color: var(--success);
        color: white;

        &:hover:not(:disabled) {
            background-color: hsl(from var(--success) h s calc(l - 5));
        }
    }

    .btn--dark {
        background-color: var(--surface-0-dark);
        color: var(--text-dark);

        &:hover:not(:disabled) {
            background-color: hsl(from var(--surface-0-dark) h s calc(l - 5));
        }
    }

    /* Button sizes */
    .btn--sm {
        padding: var(--spacing-1) var(--spacing-3);
        font-size: var(--font-size-2);
    }

    .btn--lg {
        padding: var(--spacing-3) var(--spacing-5);
        font-size: var(--font-size-4);
    }

    /* Icon-only button (circle) */
    .btn--icon {
        padding: var(--spacing-3);
        width: 2.5rem;
        height: 2.5rem;
        flex-shrink: 0;
    }

    .btn--sm.btn--icon {
        padding: var(--spacing-2);
        width: 2rem;
        height: 2rem;
    }

    .btn--lg.btn--icon {
        padding: var(--spacing-4);
        width: 3rem;
        height: 3rem;
    }


    /* ==========================================================================
   SKELETON / LOADING
   ==========================================================================

   Placeholder loading animations for content that's loading.

*/

    @keyframes skeleton-pulse {

        0%,
        100% {
            opacity: 1;
        }

        50% {
            opacity: 0.4;
        }
    }

    @keyframes skeleton-shimmer {
        0% {
            background-position: -200% 0;
        }

        100% {
            background-position: 200% 0;
        }
    }

    .skeleton {
        background-color: var(--surface-2);
        border-radius: var(--border-radius-2);
        animation: skeleton-pulse 2s var(--easing-function-3) infinite;
    }

    .skeleton-shimmer {
        background: linear-gradient(90deg,
                var(--surface-2) 0%,
                var(--surface-1) 50%,
                var(--surface-2) 100%);
        background-size: 200% 100%;
        border-radius: var(--border-radius-2);
        animation: skeleton-shimmer 1.5s var(--easing-function-4) infinite;
    }

    /* Skeleton shapes */
    .skeleton-text {
        height: 1em;
        margin-bottom: 0.5em;
    }

    .skeleton-text:last-child {
        width: 80%;
    }

    .skeleton-circle {
        border-radius: 50%;
    }

    .skeleton-avatar {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
    }

    .skeleton-button {
        height: 2.5rem;
        width: 6rem;
        border-radius: var(--border-radius-2);
    }

    /* ==========================================================================
   TABLE
   ==========================================================================

   Styled table component. Just add .table to a <table> element.

   Modifiers:
   - .table--striped: Alternating row colors
   - .table--hover: Highlight rows on hover
   - .table--compact: Reduced padding
   - .table--bordered: Borders on all cells

*/

    .table {
        --_table-color: var(--table-color, var(--text));
        --_table-header-bg: var(--table-header-bg, var(--surface-1));
        --_table-header-color: var(--table-header-color, var(--text));
        --_table-border: var(--table-border, var(--border-color));
        --_table-padding-x: var(--table-padding-x, var(--spacing-4));
        --_table-padding-y: var(--table-padding-y, var(--spacing-3));
        --_table-stripe-odd: var(--table-stripe-odd, var(--surface-2));
        --_table-stripe-even: var(--table-stripe-even, var(--surface-3));
        --_table-hover-bg: var(--table-hover-bg, var(--surface-1));
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
        font-size: inherit;
        text-align: left;
    }

    .table th,
    .table td {
        padding: var(--_table-padding-y) var(--_table-padding-x);
        vertical-align: top;
        border-bottom: 1px solid var(--_table-border);
    }

    .table th {
        font-weight: 600;
        color: var(--_table-header-color);
        background-color: var(--_table-header-bg);
        border-bottom: 2px solid var(--_table-border);
    }

    .table td {
        color: var(--_table-color);
    }

    .table tbody tr:last-child td {
        border-bottom: none;
    }

    /* Striped rows */
    .table--striped tbody tr:nth-child(odd) {
        background-color: var(--_table-stripe-odd);
    }

    .table--striped tbody tr:nth-child(even) {
        background-color: var(--_table-stripe-even);
    }

    /* Hover effect */
    .table--hover {
        tbody tr {
            transition: background-color var(--duration-0) var(--easing-function-1);

            &:hover {
                background-color: var(--_table-hover-bg);
            }
        }
    }

    /* Compact variant */
    .table--compact th,
    .table--compact td {
        padding: calc(var(--_table-padding-y) / 2) calc(var(--_table-padding-x) * 0.75);
    }

    /* Bordered variant */
    .table--bordered th,
    .table--bordered td {
        border: 1px solid var(--_table-border);
    }

    .table--bordered th {
        border-bottom: 2px solid var(--_table-border);
    }

    /* Numeric/monospace cells */
    .table td.numeric,
    .table th.numeric {
        text-align: right;
        font-variant-numeric: tabular-nums;
    }

    /* Responsive wrapper for horizontal scrolling */
    .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    /*trans-all ba b--default hover-b--muted pointer active-dim hover-shadow-4 */
    .card {
        --_card-bg: var(--card-bg, var(--surface-2));
        --_card-color: var(--card-color, var(--text));
        --_card-radius: var(--card-radius, var(--border-radius-6));
        --_card-padding: var(--card-padding, var(--spacing-5));
        --_card-shadow: var(--card-shadow, var(--box-shadow-2));
        background-color: var(--_card-bg);
        color: var(--_card-color);
        border-radius: var(--_card-radius);
        box-shadow: var(--_card-shadow);
        transition: all var(--duration-0) var(--easing-function-1);
        border: 1px solid var(--border-color);
    }

    /* Interactive card with hover effects */
    .card--interactive {
        &:hover {
            box-shadow: var(--box-shadow-3);
            border-color: var(--muted);
            background-color: var(--surface-3);
        }
    }

    /* end @layer components */
}

/* ==========================================================================
   OVERRIDES LAYER
   ==========================================================================

   Use this layer for app-specific overrides that need to win over components.
   This layer has the highest priority in the cascade.
   Focus ring utilities are here so they can override any component's default focus.

*/

@layer overrides {

    /* ==========================================================================
   FOCUS RING UTILITIES
   ==========================================================================

   Accessible focus styles with customizable ring color and offset.
   Uses :focus-visible for keyboard-only focus indication.
   In overrides layer so they can override component focus styles.

*/

    .focus-ring:focus-visible {
        outline: 2px solid var(--brand);
        outline-offset: 2px;
    }

    .focus-ring-inset:focus-visible {
        outline: 2px solid var(--brand);
        outline-offset: -2px;
    }

    .focus-ring-error:focus-visible {
        outline: 2px solid var(--error);
        outline-offset: 2px;
    }

    .focus-ring-success:focus-visible {
        outline: 2px solid var(--success);
        outline-offset: 2px;
    }

    /* Remove default focus styles when using focus-ring (only for non-keyboard focus) */
    .focus-ring:focus:not(:focus-visible),
    .focus-ring-inset:focus:not(:focus-visible),
    .focus-ring-error:focus:not(:focus-visible),
    .focus-ring-success:focus:not(:focus-visible) {
        outline: none;
    }
}